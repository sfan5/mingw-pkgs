#!/bin/bash -eu

. ./common.sh
common_init "$@"

pkgver=2.10.1
fetch_web "https://download.savannah.gnu.org/releases/freetype/freetype-$pkgver.tar.gz" \
	3a60d391fd579440561bf0e7f31af2222bc610ad6ce4d9d7bd2165bca8669110
unpack_tar "freetype-$pkgver.tar.gz" --strip-components=1

CC=$MINGW_CC PKG_CONFIG=/bin/false \
./configure --host=$MINGW_PREFIX --prefix=/ --with-png=no
make

make DESTDIR=$INSTALL_DIR install
rm -rf $INSTALL_DIR/{share,lib/*.la,lib/pkgconfig} # no manpages or pkg-config on windows

package $pkgver
