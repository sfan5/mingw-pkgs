#!/bin/bash -eu

. ./common.sh
common_init "$@"

pkgver=3.19.2
pkgver_year=2017
pkgver_num=3190200
fetch_web "https://www.sqlite.org/$pkgver_year/sqlite-autoconf-$pkgver_num.tar.gz" \
	ca5361fb01cc3ad63d6fd4eb2cb0b6398e629595896d3558f7e121d37dac2ffc
unpack_tar "sqlite-autoconf-$pkgver_num.tar.gz" --strip-components=1

CC=$MINGW_CC ./configure --host=$MINGW_PREFIX --prefix=/ --disable-static-shell
make -j$MAKE_JOBS

make DESTDIR=$INSTALL_DIR install
rm -rf $INSTALL_DIR/{share,lib/*.la,lib/pkgconfig} # no manpages or pkg-config on windows

package $pkgver
