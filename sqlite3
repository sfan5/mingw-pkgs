#!/bin/bash -eu

. ./common.sh
common_init "$@"

pkgver=3.14.2
pkgver_year=2016
pkgver_num=3140200
fetch_web "https://www.sqlite.org/$pkgver_year/sqlite-autoconf-$pkgver_num.tar.gz" \
	644f0c127f7d0cbe8765b9bbdf9ed09d6a2f2b9dfba48ddfd8ca0a42fdb5b3fc
unpack_tar "sqlite-autoconf-$pkgver_num.tar.gz" --strip-components=1

CC=$MINGW_CC ./configure --host=${MINGW_CC%-*} --prefix=/ --disable-static-shell
make -j$MAKE_JOBS

make DESTDIR=$INSTALL_DIR install
rm -rf $INSTALL_DIR/{share,lib/*.la,lib/pkgconfig} # no manpages or pkg-config on windows

package $pkgver